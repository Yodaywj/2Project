<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>民法小助手</title>
    <link rel="stylesheet" href="../vendor/bootstrap-4.5.0-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/juqery.js"></script>
    <script src="../vendor/pagenation/jqpaginator.min.js"></script>
    <script src="../vendor/bootstrap-4.5.0-dist/js/bootstrap.bundle.min.js"></script>
</head>

<body id="body">
<div id="showResult" class="showResult row min-vh-100">

    <div id="documents" class="col col-9">

        <div class="item mb-3">
            <div class="head"><a href="">title</a></div>
            <div class="body border border-success" style="min-height: 48px;" >content</div>
        </div>
        <div class="item mb-3">
            <div class="head"><a href="">title</a></div>
            <div class="body">content</div>
        </div>
<code></code>
    </div>
</div>
</body>
<script>
    $(document).ready(function () {
        flashSearchResult();
    });
    function flashSearchResult() {
        console.log(getUrlQueryString());
        $.ajax({
            type: "GET",
            url: getRootPath()+"judicialDocument",
            async: false,
            data: { "docId": getUrlQueryString()},
            dataType: "json",
            success:function (res) {
                let html = '';
                let nHtml = '';

                $.each(res, function (index,item) {
                    nHtml='';
                    if(nHtml.length > 200){
                        nHtml = nHtml.substring(0,200);
                        nHtml+='...';
                    }
                    html+=('<pre class="item mb-3">'+
                        '<div class="head">'+nHtml+'</div>'+
                        '<code style="word-wrap: break-word;">'+item.content+'</code>'+
                        '</div>');
                    console.log(item.content);
                });
                if (res.length === 0) {
                    html = "<h2>没有搜索到相关结果，换个关键词吧！</h2>"
                }
                searchResult = res;
                $("#body").html(html);
                // 省略号
            }
        });
    }
    function getUrlQueryString() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest ;
        if (url.indexOf("?") !== -1) {
            var str = url.substr(1);
            strs = str.split("=");
            theRequest = strs[1];
        }
        return theRequest;
    }
    function getRootPath(){
        //获取当前网址
        var curWwwPath=window.document.location.href;
        //获取主机地址之后的目录
        var pathName=window.document.location.pathname;
        var pos=curWwwPath.indexOf(pathName);
        //获取主机地址
        var localhostPaht=curWwwPath.substring(0,pos);
        //获取带"/“的项目名
        var projectName=pathName.substring(0,pathName.substr(1).indexOf('/')+1);
        return(localhostPaht+projectName+"/");
    }
</script>
</html>